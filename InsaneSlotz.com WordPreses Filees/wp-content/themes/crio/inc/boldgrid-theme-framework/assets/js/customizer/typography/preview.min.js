const api=wp.customize;export class Preview{bindEvents(){$(()=>this._bindTypography())}getCSS(e){_.isUndefined(e)&&(e=api("bgtfw_headings_typography")()),_.isString(e)&&(e=JSON.parse(e));let t=api("bgtfw_headings_font_size")(),a="";return _.each(BOLDGRID.CUSTOMIZER.data.customizerOptions.typography.selectors,function(e,i){var n;"headings"===e.type&&(n=t*e.amount,"ceil"===e.round&&(n=Math.ceil(n)),"floor"===e.round&&(n=Math.floor(n)),a+=i+"{font-size:"+n+"px;}")}),a}addStyle(e){if(document.getElementById("bgtfw-headings-typography"))document.getElementById("bgtfw-headings-typography").innerHTML=e;else{let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",a.id="bgtfw-headings-typography",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)),t.appendChild(a)}document.getElementById("kirki-postmessage-bgtfw_headings_typography")&&$("#bgtfw-headings-typography").insertAfter("#kirki-postmessage-bgtfw_headings_typography")}_bindTypography(){this.addStyle(this.getCSS(api("bgtfw_headings_typography")())),["bgtfw_body_typography","bgtfw_headings_typography","bgtfw_tagline_typography","bgtfw_site_title_typography","bgtfw_menu_typography_main"].forEach(e=>this.addTypographyOverride(e)),api("bgtfw_headings_typography",e=>e.bind(e=>this.addStyle(this.getCSS(e)))),api("bgtfw_headings_font_size",e=>e.bind(e=>this.addStyle(this.getCSS(e))))}addTypographyOverride(e){api(e,function(t){t.bind(function(t){var a,i,n;if(!_.isString(t))return;n=JSON.parse(t),/\s/.test(n["font-family"])&&(n["font-family"]='"'+n["font-family"]+'"'),kirkiPostMessageFields.forEach(function(t){!a&&e===t.id&&t.output[0].element&&(a=t.output[0].element)}),i=a+" {font-family: "+n["font-family"]+";}";let d=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",s.id=e+"-font-families",s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i)),d.appendChild(s)})})}}