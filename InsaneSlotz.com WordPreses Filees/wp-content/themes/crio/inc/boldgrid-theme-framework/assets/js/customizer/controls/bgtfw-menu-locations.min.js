const api=wp.customize;export default{ready(){api.controlConstructor.nav_menu_location.__super__.ready.apply(this,arguments),api.bind("ready",()=>{let t=[];Object.keys(_wpCustomizeNavMenusSettings.locationSlugMappedToName).forEach(e=>{let o=!1;/.*_\d+/.test(e)&&(o=!0,api.controlConstructor.nav_menu_location.prototype.updateMenuLocations(e,o),t.push(e))});let e=api.control("bgtfw_header_layout").getConnectedMenus().map(t=>t.replace("boldgrid_menu_",""));e=e.concat(t),api.controlConstructor.nav_menu_location.prototype.updateSectionDescription(e),["bgtfw_fixed_header","bgtfw_header_layout_position","bgtfw_sticky_header_layout","bgtfw_sticky_header_layout_custom","bgtfw_header_preset","bgtfw_sticky_header_preset","bgtfw_header_layout","bgtfw_header_layout_custom","bgtfw_footer_layout"].forEach(t=>{api(t,t=>{this.toggleUsedLocations(),t.bind(()=>this.toggleUsedLocations())})}),api.section("add_menu").expanded.bind(()=>this.toggleUsedLocations()),api.panel("nav_menus").expanded.bind(()=>this.toggleUsedLocations()),api.section.bind("add",function(t){t&&t.params&&t.params.type&&"nav_menu"===t.params.type&&api.control(t.id+"[locations]",function(t){t.deferred.embedded.done(function(){let t=api.control("bgtfw_header_layout").getConnectedMenus().map(t=>t.replace("boldgrid_menu_",""));api.controlConstructor.nav_menu_location.prototype.updateSectionDescription(t),Object.keys(_wpCustomizeNavMenusSettings.locationSlugMappedToName).forEach(e=>{let o=t.includes(e);/.*_\d+/.test(e)&&(o=!0),api.controlConstructor.nav_menu_location.prototype.updateMenuLocations(e,o)})})})})})},toggleUsedLocations(){let t,e=this.id.slice(19,-1),o=api.control("bgtfw_header_layout").getConnectedMenus().map(t=>t.replace("boldgrid_menu_","nav_menu_locations[")+"]");t=/.*_\d+/.test(this.id)?function(){return!0}:()=>!!o.includes(this.id);let a=api.panel(`bgtfw_menu_location_${e}`);a.active.validate=t,a.active.set(t()),t()?a.activate():a.deactivate(),this.active.validate=t,this.active.set(t());let i=[];Object.keys(_wpCustomizeNavMenusSettings.locationSlugMappedToName).forEach(t=>{/.*_\d+/.test(t)&&i.push(t)}),o=o.concat(i),this.updateSectionDescription(o),this.updateMenuLocations(e,t())},updateSectionDescription(t){t=_.uniq(t).length;let e=api.section("menu_locations"),o=$(e.params.description)[0].textContent,a=o.replace(/\d+/g,t);e.params.description=e.params.description.replace(o,a),e.container.find(".description p:first-child, .customize-section-title-menu_locations-description").each((e,o)=>$(o).text(o.textContent.replace(/\d+/g,t)))},updateMenuLocations(t,e){e?$(`[data-location-id="${t}"]`).closest("li").show():$(`[data-location-id="${t}"]`).closest("li").hide()}};