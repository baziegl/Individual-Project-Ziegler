var BOLDGRID=BOLDGRID||{};BOLDGRID.SEO={report:{bgseo_visibility:{},bgseo_keywords:{},bgseo_meta:{},rawstatistics:{},textstatistics:{}}},function(e){"use strict";butterbean.views.register_control("dashboard",{tagName:"div",attributes:function(){return{id:"butterbean-control-"+this.model.get("name"),"class":"butterbean-control butterbean-control-"+this.model.get("type")}},initialize:function(){e(window).bind("bgseo-report",_.bind(this.setAnalysis,this)),this.bgseo_template=wp.template("butterbean-control-dashboard"),_.bindAll(this,"render"),this.model.bind("change",this.render)},results:function(e){var t={};return _.each(e,function(e){_.extend(t,e)}),t},setAnalysis:function(e,t){var n,o=this.model.get("section"),s=_.pick(t,o);this.sectionReport=this.results(s),this.model.set("analysis",this.sectionReport),_(t).each(function(e){_.isUndefined(e.sectionScore)||(n=BOLDGRID.SEO.Sections.score(e),_(e).extend(n))}),_(t.bgseo_keywords).extend({overview:{score:BOLDGRID.SEO.Dashboard.overviewScore(t)}}),_(t.bgseo_keywords.overview).extend({status:BOLDGRID.SEO.Dashboard.overviewStatus(t.bgseo_keywords.overview.score)}),BOLDGRID.SEO.Sections.navHighlight(t),BOLDGRID.SEO.Sections.overviewStatus(t)},render:function(){return this.model.get("active")&&(this.el.innerHTML=this.bgseo_template(this.model.toJSON())),this}})}(jQuery),function(e){"use strict";butterbean.views.register_control("keywords",{tagName:"div",attributes:function(){return{id:"butterbean-control-"+this.model.get("name"),"class":"butterbean-control butterbean-control-"+this.model.get("type")}},initialize:function(){e(window).bind("bgseo-report",_.bind(this.setAnalysis,this)),this.bgseo_template=wp.template("butterbean-control-keywords"),_.bindAll(this,"render"),this.model.bind("change",this.render)},setAnalysis:function(e,t){this.model.set(t)},render:function(){return this.model.get("active")&&(this.el.innerHTML=this.bgseo_template(this.model.toJSON())),this}})}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.SEO=BOLDGRID.SEO||{},function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Util={init:function(){_.mixin({modifyObject:function(e,t){return _.object(_.map(e,function(e,n){return[n,t(e)]}))},pickDeep:function(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return this.each(n,function(n){var o=n.split(".");n=o.shift(),n in e&&(o.length>0?t[n]?_.extend(t[n],_.pickDeep(e[n],o.join("."))):t[n]=_.pickDeep(e[n],o.join(".")):t[n]=e[n])}),t}}),Number.prototype.isBetween||(Number.prototype.isBetween=function(e,t){_.isUndefined(e)&&(e=0),_.isUndefined(t)&&(t=0);var n=Math.max(e,t),o=Math.min(e,t);return this>o&&this<n}),Number.prototype.rounded||(Number.prototype.rounded=function(e){_.isUndefined(e)&&(e=0);var t=Math.pow(10,e),n=Math.round(this*t)/t;return n}),String.prototype.printf||(String.prototype.printf=function(){for(var e=this,t=0;/%s/.test(e);)e=e.replace("%s",arguments[t++]);return e}),String.prototype.occurences||(String.prototype.occurences=function(e,t){if(e+="",e.length<=0)return this.length+1;for(var n=0,o=0,s=t?1:e.length;;){if(o=this.indexOf(e,o),!(o>=0))break;++n,o+=s}return n})}},t=o.Util}(jQuery),function(){"use strict";var e,t;t=BOLDGRID.SEO,t.Words={init:function(t){var n,o;if(t)for(n in t)t.hasOwnProperty(n)&&(e.settings[n]=t[n]);o=e.settings.l10n.shortcodes,o&&o.length&&(e.settings.shortcodesRegExp=new RegExp("\\[\\/?(?:"+o.join("|")+")[^\\]]*?\\]","g"))},settings:{HTMLRegExp:/<\/?[a-z][^>]*?>/gi,HTMLcommentRegExp:/<!--[\s\S]*?-->/g,spaceRegExp:/&nbsp;|&#160;/gi,HTMLEntityRegExp:/&\S+?;/g,connectorRegExp:/--|\u2014/g,removeRegExp:new RegExp(["[","!-@[-`{-~","-¿×÷"," -⯿","⸀-⹿","]"].join(""),"g"),astralRegExp:/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wordsRegExp:/.+?\s+/g,characters_excluding_spacesRegExp:/\S/g,characters_including_spacesRegExp:/[^\f\n\r\t\v\u00AD\u2028\u2029]/g,l10n:window.wordCountL10n||{}},words:function(t,n){var o=0;return n=n||e.settings.l10n.type,"characters_excluding_spaces"!==n&&"characters_including_spaces"!==n&&(n="words"),t&&(t+="\n",t=t.replace(e.settings.HTMLRegExp,"\n"),t=t.replace(e.settings.HTMLcommentRegExp,""),e.settings.shortcodesRegExp&&(t=t.replace(e.settings.shortcodesRegExp,"\n")),t=t.replace(e.settings.spaceRegExp," "),"words"===n?(t=t.replace(e.settings.HTMLEntityRegExp,""),t=t.replace(e.settings.connectorRegExp," "),t=t.replace(e.settings.removeRegExp,"")):(t=t.replace(e.settings.HTMLEntityRegExp,"a"),t=t.replace(e.settings.astralRegExp,"a")),t=t.match(e.settings[n+"RegExp"]),t&&(o=t)),o}},e=t.Words}(),function(e,t){"use strict";var n,o;o=BOLDGRID.SEO,o.Wordcount={count:0,words:[],init:function(){e(n.update)},update:function(){var e,s,r=o.Editor.ui.getRawText();e=t.count(r),s=BOLDGRID.SEO.Words.words(r),e!==n.count&&o.Editor.element.trigger("bgseo-analysis",[{words:s,count:e}]),n.words=s,n.count=e}},n=o.Wordcount}(jQuery,new wp.utils.WordCounter),function(e){"use strict";var t;BOLDGRID.SEO.Admin={init:function(){e(document).ready(function(){t._setWordCounts()})},wordCount:function(n){var o=n.attr("maxlength"),s=e("<span />",{"class":"boldgrid-seo-meta-counter",style:"font-weight: bold"}),r=e("<div />",{"class":"boldgrid-seo-meta-countdown boldgrid-seo-meta-extra",html:" characters left"});o&&n.removeAttr("maxlength").after(r.prepend(s)).on("keyup focus",function(){t.setCounter(s,n,o)}),t.setCounter(s,n,o)},setCounter:function(e,t,n){var o=t.val(),s=o.length;e.html(n-s),"boldgrid-seo-field-meta_description"===t.attr("id")?s>n?e.css({color:"#EA4335"}):s.isBetween(0,_bgseoContentAnalysis.seoDescription.length.okScore)?e.css({color:"#FBBC05"}):s.isBetween(_bgseoContentAnalysis.seoDescription.length.okScore-1,_bgseoContentAnalysis.seoDescription.length.goodScore+1)?e.css({color:"#34A853"}):e.css({color:"black"}):s>n?e.css({color:"#EA4335"}):s.isBetween(0,_bgseoContentAnalysis.seoTitle.length.okScore)?e.css({color:"#FBBC05"}):s>_bgseoContentAnalysis.seoTitle.length.okScore-1?e.css({color:"#34A853"}):e.css({color:"black"})},_setWordCounts:function(){e("#boldgrid-seo-field-meta_title, #boldgrid-seo-field-meta_description").each(function(){t.wordCount(e(this))})}},t=BOLDGRID.SEO.Admin}(jQuery),function(e){"use strict";var t,n;n=BOLDGRID.SEO,n.TinyMCE={selector:"#content",previewSelector:"#preview-action > .preview.button",setup:function(){e(document).ready(function(){t._setupWordCount(),t.editorChange()})},getContent:function(){var o,s=t.getTinymce();s?o=s.getContent():(o=n.Editor.element.val(),o=o.replace(/\r?\n|\r/g,""));var r=e.parseHTML(o);return o={raw:r,text:n.Editor.stripper(o.toLowerCase())}},getRawText:function(){var e,o=t.getTinymce();return e=!o||o.isHidden()?n.Editor.element.val():o.getContent({format:"raw"})},getTinymce:function(){return"undefined"!=typeof tinyMCE?tinyMCE.get(wpActiveEditor):null},editorChange:function(){var n,o;return e("#content.wp-editor-area").on("input propertychange paste nodechange",function(){o=e(this).attr("id"),n=t.wpContent(o)}),n},tmceChange:function(e){var n,o;return o=e.target.id,n=t.wpContent(o)},isNewPost:function(){return!e("#sample-permalink").length},wpContent:function(o){var s={};switch(o){case"tinymce":t.getTinymce()&&(s=t.getTinymce().getContent());break;case"content":s=n.Editor.element.val(),s=s.replace(/\r?\n|\r/g,"")}var r=e.parseHTML(s);s={raw:r,text:n.Editor.stripper(s.toLowerCase())},n.Editor.element.trigger("bgseo-analysis",[s])},_setupWordCount:function(){var t=_.debounce(n.Wordcount.update,1e3);e(document).on("tinymce-editor-init",function(e,n){"content"===n.id&&n.on("AddUndo keyup",t)}),n.Editor.element.on("input keyup",t)}},t=n.TinyMCE}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.ContentAnalysis={seoContentLengthScore:function(e){var t,n,o={};return e=Number(e),t=_bgseoContentAnalysis.content.length,n=t.contentLength.printf(e)+"  ",0===e&&(o={status:"red",msg:t.badEmpty}),e.isBetween(0,t.badShortScore)&&(o={status:"red",msg:n+t.badShort}),e.isBetween(t.badShortScore-1,t.okScore)&&(o={status:"yellow",msg:n+t.ok}),e>t.okScore-1&&(o={status:"green",msg:n+t.good}),o},seoImageLengthScore:function(e){var t={status:"green",msg:_bgseoContentAnalysis.image.length.good};return e||(t={status:"red",msg:_bgseoContentAnalysis.image.length.bad}),t},keywords:function(e){var t=o.Keywords.getKeyword();return e.occurences(t)}},t=o.ContentAnalysis}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Dashboard={overviewScore:function(e){var n,o=t.totalScore(e),s=_.size(butterbean.models.sections);return n=2*s,(o/n*100).rounded(2)},overviewStatus:function(e){var t;return t="green",e<40&&(t="red"),e.isBetween(39,76)&&(t="yellow"),t},getStatuses:function(e){var t={};return _.each(butterbean.models.sections,function(n){var o,s=n.get("name");o=e[s].sectionStatus,t[s]=o,_(t[s]).extend(o)}),t},assignNumbers:function(e){var n,o;return o=t.getStatuses(e),n=_.mapObject(o,function(e){var t;return"red"===e&&(t=0),"yellow"===e&&(t=1),"green"===e&&(t=2),t})},totalScore:function(e){var n,o=t.assignNumbers(e);return n=_(o).reduce(function(e,t){return e+t},0)}},t=o.Dashboard}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Description={init:function(){e(document).ready(t.onReady)},onReady:function(){t.getSettings(),t._description()},getSettings:function(){t.settings={description:e("#boldgrid-seo-field-meta_description")}},_description:function(){t.settings.description.on("input propertychange paste",_.debounce(function(){e(this).trigger("bgseo-analysis",[{descLength:t.settings.description.val().length}])},1e3))},getDescription:function(){return t.settings.description},descriptionScore:function(e){var t,n={};return t=_bgseoContentAnalysis.seoDescription.length,0===e&&(n={status:"red",msg:t.badEmpty}),e.isBetween(0,t.okScore)&&(n={status:"yellow",msg:t.ok}),e.isBetween(t.okScore-1,t.goodScore+1)&&(n={status:"green",msg:t.good}),e>t.goodScore&&(n={status:"red",msg:t.badLong}),n},keywords:function(){var e,n;return e=o.Keywords.getKeyword(),n=t.getDescription().val(),n=n.toLowerCase(),n.occurences(e)}},t=o.Description}(jQuery),function(e){"use strict";var t,n,o;n=BOLDGRID.SEO,o=n.report,n.Editor={ui:null,element:null,init:function(){t.ui=document.body.classList.contains("block-editor-page")?n.Gutenberg:n.TinyMCE,t.element=e(t.ui.selector),t.ui.setup(),t.onloadContent()},onloadContent:function(){e("#content.wp-editor-area[aria-hidden=false]");e(window).on("load bgseo-media-inserted",function(){var e=t.ui.getContent();t.getRenderedContent(),_.defer(function(){t.element.trigger("bgseo-analysis",[e])})})},getRenderedContent:function(){var s,r;r=e(n.Editor.ui.previewSelector).attr("href"),n.Editor.ui.isNewPost()||e.get(r,function(r){var i,a,d;d=e(r),i=d.find("h1"),a=d.find("h2"),s={h1Count:i.length-o.rawstatistics.h1Count,h1text:_.filter(n.Headings.getHeadingText(i),function(e){return!_.findWhere(o.rawstatistics.h1text,e)}),h2Count:a.length-o.rawstatistics.h2Count,h2text:_.filter(n.Headings.getHeadingText(a),function(e){return!_.findWhere(o.rawstatistics.h2text,e)})},_.extend(o,{rendered:s}),t.triggerAnalysis()},"html")},stripper:function(e){var t;return t=document.implementation.createHTMLDocument("New").body,t.innerHTML=e,t.textContent||t.innerText||" "},triggerAnalysis:function(){t.element.trigger("bgseo-analysis",[t.ui.getContent()])}},t=n.Editor}(jQuery),function(e){"use strict";var t,n;n=BOLDGRID.SEO,n.Gutenberg={selector:"#editor",previewSelector:".editor-post-preview",setup:function(){e(n.Editor.triggerAnalysis),t._setupEditorChange()},isNewPost:function(){return wp.data.select("core/editor").isCleanNewPost()},getContent:function(){var e=t.getRawText();return e={raw:e,text:n.Editor.stripper(e.toLowerCase())}},getRawText:function(){return wp.data.select("core/editor").getEditedPostAttribute("content")},_setupEditorChange:function(){var e="";wp.data.subscribe(_.debounce(function(){t.getRawText()!==e&&(n.Wordcount.update(),n.Editor.triggerAnalysis(),e=t.getRawText())},1e3))}},t=n.Gutenberg}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Headings={init:function(){e(document).ready(t.onReady)},onReady:function(){t.getSettings(),t._checkbox()},getSettings:function(){t.settings={displayTitle:e('[name="boldgrid-display-post-title"]').last()}},_checkbox:function(){t.settings.displayTitle.on("change",_.debounce(function(){e(this).trigger("bgseo-analysis",[o.Editor.ui.getContent()])},1e3))},score:function(e){var n;return n={status:"green",msg:_bgseoContentAnalysis.headings.h1.good},e>1&&(n={status:"red",msg:_bgseoContentAnalysis.headings.h1.badMultiple}),e>1&&t.settings.displayTitle.is(":checked")&&(n={status:"red",msg:_bgseoContentAnalysis.headings.h1.badBoldgridTheme}),0===e&&(n={status:"red",msg:_bgseoContentAnalysis.headings.h1.badEmpty}),n},keywords:function(e){var n={length:0},s=o.Keywords.getKeyword();if(_.isUndefined(e)&&(e={count:t.getRealHeadingCount()}),!_.isEmpty(e))return _(e.count).each(function(e,t){var o=e.text;_(o).each(function(e){n.length=Number(n.length)+Number(e.heading.occurences(s)*e.count)})}),n.length},getHeadingText:function(t){var n={};return n=_.countBy(t,function(t,n){return e.trim(e(t).text().toLowerCase())}),n=_.map(n,function(e,t){return!_(n).has({heading:t,count:e})&&{heading:t,count:e}})},getRealHeadingCount:function(){var e={};return _.isUndefined(n.rendered)?e=t.getContentHeadings():(e={count:{h1:{length:n.rendered.h1Count+n.rawstatistics.h1Count,text:_(n.rendered.h1text).union(n.rawstatistics.h1text)},h2:{length:n.rendered.h2Count+n.rawstatistics.h2Count,text:_(n.rendered.h2text).union(n.rawstatistics.h2text)}}},_(e).extend({lengthScore:t.score(e.count.h1.length)})),e},getContentHeadings:function(){var n,s,r,i;return n={count:{h1:{length:0,text:{}},h2:{length:0,text:{}}}},i=o.Editor.ui.getContent(),i=e("<div>"+i.raw+"</div>"),s=i.find("h1"),r=i.find("h2"),s.length||r.length?n={count:{h1:{length:s.length,text:t.getHeadingText(s)},h2:{length:r.length,text:t.getHeadingText(r)}}}:n}},t=o.Headings}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Keywords={init:function(){e(document).ready(t.onReady)},onReady:function(){t.getSettings(),t._keywords(),t.setPlaceholder()},getSettings:function(){t.settings={keyword:e("#bgseo-custom-keyword"),content:o.Editor.element}},_keywords:function(){t.settings.keyword.on("input propertychange paste",_.debounce(function(){var e={};t.settings.keyword.val().length;e={keywords:{title:{length:o.Title.keywords(),lengthScore:0},description:{length:o.Description.keywords(),lengthScore:0},keyword:t.getCustomKeyword()}},t.settings.keyword.trigger("bgseo-analysis",[e])},1e3))},setPlaceholder:function(e){t.settings.keyword.attr("placeholder",e)},keywordCount:function(e,t){var n;return n=e.split(t).length-1},phraseLength:function(e){return 0===e.length?0:(e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,"\n"),e.split(" ").length)},keywordDensity:function(e){var n,s,r,i;return i=t.getKeyword(),_.isUndefined(i)?0:(i=i.toLowerCase(),s=t.keywordCount(e,i),r=o.Wordcount.count,n=s/r*100,n=Math.round(10*n)/10)},normalizeWords:function(e){return e.replace("'","")},trim:function(e){return e.trim()},recommendedKeywords:function(n,o){var s,r=_bgseoContentAnalysis.stopWords,i={},a=[];if(!_.isEmpty(n)){r=r.split(",").map(t.trim),r=r.map(t.normalizeWords);for(var d=0;d<n.length;d++){var g=e.trim(n[d]).toLowerCase();!g||g.length<3||r.indexOf(g)>-1||(_.isUndefined(i[g])?(i[g]=a.length,a.push([g,1])):a[i[g]][1]++)}return a.sort(function(e,t){return t[1]-e[1]}),s=a.slice(0,o)}},getCustomKeyword:function(){return e.trim(t.settings.keyword.val()).toLowerCase()},getKeyword:function(){var s,r=o.Editor.ui.getRawText();return t.getCustomKeyword().length?s=t.getCustomKeyword():_.isUndefined(n.textstatistics.recommendedKeywords)||_.isUndefined(n.textstatistics.recommendedKeywords[0])?_.isEmpty(e.trim(r.text))?s=void 0:t.recommendedKeywords(o.Words.words(r.raw),1):s=n.textstatistics.recommendedKeywords[0][0],s},getRecommendedCount:function(e){var t;return _.isUndefined(e)&&(e=o.Words.words(o.Editor.ui.getRawText())),t=_.modifyObject(_bgseoContentAnalysis.keywords.recommendedCount,function(t){var n=Number(t/100*o.Words.words(e).length).rounded(0);return n>0?n:1})},score:function(){var e={};return e={title:t.titleScore(),description:t.descriptionScore()}},titleScore:function(e){var t;return t={status:"green",msg:_bgseoContentAnalysis.seoTitle.keywordUsage.good},0===e&&(t={status:"red",msg:_bgseoContentAnalysis.seoTitle.keywordUsage.bad}),e>1&&(t={status:"yellow",msg:_bgseoContentAnalysis.seoTitle.keywordUsage.ok}),t},descriptionScore:function(e){var t;return t={status:"green",msg:_bgseoContentAnalysis.seoDescription.keywordUsage.good},0===e&&(t={status:"red",msg:_bgseoContentAnalysis.seoDescription.keywordUsage.bad}),e>1&&(t={status:"yellow",msg:_bgseoContentAnalysis.seoDescription.keywordUsage.ok}),t},contentScore:function(e){var n,o,s;return o=t.getRecommendedCount(),0===e&&(n={status:"red",msg:_bgseoContentAnalysis.content.keywordUsage.bad}),e.isBetween(o.min-1,o.max+1)&&(s=1===o.min?_bgseoContentAnalysis.content.keywordUsage.goodSingular:_bgseoContentAnalysis.content.keywordUsage.good.printf(o.min),n={status:"green",msg:s}),e<o.min&&0!==e&&(s=1===o.min?_bgseoContentAnalysis.content.keywordUsage.okShortSingular:_bgseoContentAnalysis.content.keywordUsage.okShort.printf(o.min),n={status:"yellow",msg:s}),e>o.max&&(s=1===o.min?_bgseoContentAnalysis.content.keywordUsage.okLongSingular:_bgseoContentAnalysis.content.keywordUsage.okLong.printf(o.min),n={status:"red",msg:s}),n},headingScore:function(e){var t;return t={status:"green",msg:_bgseoContentAnalysis.headings.keywordUsage.good},0===e&&(t={status:"red",msg:_bgseoContentAnalysis.headings.keywordUsage.bad}),e>3&&(t={status:"yellow",msg:_bgseoContentAnalysis.headings.keywordUsage.ok}),t},keywordPhraseScore:function(e){var t;return t={status:"green",msg:_bgseoContentAnalysis.keywords.keywordPhrase.good},1===e&&(t={status:"yellow",msg:_bgseoContentAnalysis.keywords.keywordPhrase.ok}),0===e&&(t={status:"red",msg:_bgseoContentAnalysis.keywords.keywordPhrase.bad}),t}},t=o.Keywords}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Readability={gradeLevel:function(e){var n,o={};return n=textstatistics(e).fleschKincaidReadingEase(),o=t.gradeAnalysis(n)},gradeAnalysis:function(e){var t,n={};return e>90&&(n={score:e,gradeLevel:"5th grade",explanation:"Very easy to read. Easily understood by an average 11-year-old student.",lengthScore:{status:"green",msg:_bgseoContentAnalysis.readingEase.goodHigh}}),e.isBetween(79,91)&&(n={score:e,gradeLevel:"6th grade",explanation:"Easy to read. Conversational English for consumers.",lengthScore:{status:"green",msg:_bgseoContentAnalysis.readingEase.goodMedHigh}}),e.isBetween(69,81)&&(n={score:e,gradeLevel:"7th grade",explanation:"Fairly easy to read.",lengthScore:{status:"green",msg:_bgseoContentAnalysis.readingEase.goodMedLow}}),e.isBetween(59,71)&&(n={score:e,gradeLevel:"8th & 9th",explanation:"Plain English. Easily understood by 13- to 15-year-old students.",lengthScore:{status:"green",msg:_bgseoContentAnalysis.readingEase.goodLow}}),e.isBetween(49,61)&&(n={score:e,gradeLevel:"10th to 12th",explanation:"Fairly difficult to read.",lengthScore:{status:"yellow",msg:_bgseoContentAnalysis.readingEase.ok}}),e.isBetween(29,51)&&(n={score:e,gradeLevel:"College Student",explanation:"Difficult to read.",lengthScore:{status:"red",msg:_bgseoContentAnalysis.readingEase.badHigh}}),e<30&&(n={score:e,gradeLevel:"College Graduate",explanation:"Difficult to read.",lengthScore:{status:"red",msg:_bgseoContentAnalysis.readingEase.badLow}}),t=_bgseoContentAnalysis.readingEase.score.printf(e)+" ",n.lengthScore.msg=n.lengthScore.msg.replace(/^/,t),n}},t=o.Readability}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Report={init:function(){e(document).ready(t.onReady)},onReady:function(){t.getSettings(),t.generateReport()},getSettings:function(){t.settings={title:e("#boldgrid-seo-field-meta_title"),description:e("#boldgrid-seo-field-meta_description")}},generateReport:function(){_.isUndefined(t.settings)||e(document).on("bgseo-analysis",function(s,r){var i,a;if(i=t.settings.title.val().length,a=t.settings.description.val().length,r.words&&_(n.textstatistics).extend({recommendedKeywords:o.Keywords.recommendedKeywords(r.words,1),customKeyword:o.Keywords.getKeyword()}),r){if(r.raw){var d=e("<div></div>").prepend(r.raw),g=d.find("h1"),c=d.find("h2"),l={};l={h1Count:g.length,h1text:o.Headings.getHeadingText(g),h2Count:c.length,h2text:o.Headings.getHeadingText(c),imageCount:d.find("img").length},_(n.rawstatistics).extend(l)}if(r.keywords&&_(n.bgseo_keywords).extend({keywordPhrase:{length:o.Keywords.phraseLength(o.Keywords.settings.keyword.val()),lengthScore:o.Keywords.keywordPhraseScore(o.Keywords.phraseLength(o.Keywords.settings.keyword.val()))},keywordTitle:{lengthScore:o.Keywords.titleScore(o.Title.keywords())},keywordDescription:{lengthScore:o.Keywords.descriptionScore(o.Description.keywords())},keywordContent:{lengthScore:o.Keywords.contentScore(o.ContentAnalysis.keywords(o.Editor.ui.getContent().text))},keywordHeadings:{length:o.Headings.keywords(o.Headings.getRealHeadingCount()),lengthScore:o.Keywords.headingScore(o.Headings.keywords(o.Headings.getRealHeadingCount()))},customKeyword:r.keywords.keyword}),r.text){var u,y=o.Headings.getRealHeadingCount(),h=r.text,w=o.Editor.ui.getRawText();i=t.settings.title.val().length,a=t.settings.description.val().length,u=o.Keywords.recommendedKeywords(w,1),_.isUndefined(u)||_.isUndefined(u[0])||o.Keywords.setPlaceholder(u[0][0]),_(n).extend({bgseo_meta:{title:{length:i,lengthScore:o.Title.titleScore(i)},description:{length:a,lengthScore:o.Description.descriptionScore(a),keywordUsage:o.Description.keywords()},titleKeywordUsage:{lengthScore:o.Keywords.titleScore(o.Title.keywords())},descKeywordUsage:{lengthScore:o.Keywords.descriptionScore(o.Description.keywords())},sectionScore:{},sectionStatus:{}},bgseo_visibility:{robotIndex:{lengthScore:o.Robots.indexScore()},robotFollow:{lengthScore:o.Robots.followScore()},sectionScore:{},sectionStatus:{}},bgseo_keywords:{keywordPhrase:{length:o.Keywords.phraseLength(o.Keywords.settings.keyword.val()),lengthScore:o.Keywords.keywordPhraseScore(o.Keywords.phraseLength(o.Keywords.settings.keyword.val()))},keywordTitle:{lengthScore:o.Keywords.titleScore(o.Title.keywords())},keywordDescription:{lengthScore:o.Keywords.descriptionScore(o.Description.keywords())},keywordContent:{lengthScore:o.Keywords.contentScore(o.ContentAnalysis.keywords(o.Editor.ui.getContent().text))},keywordHeadings:{length:o.Headings.keywords(y),lengthScore:o.Keywords.headingScore(o.Headings.keywords(y))},image:{length:n.rawstatistics.imageCount,lengthScore:o.ContentAnalysis.seoImageLengthScore(n.rawstatistics.imageCount)},headings:y,wordCount:{length:o.Wordcount.count,lengthScore:o.ContentAnalysis.seoContentLengthScore(o.Wordcount.count)},sectionScore:{},sectionStatus:{}},textstatistics:{recommendedKeywords:u,recommendedCount:o.Keywords.getRecommendedCount(w),keywordDensity:o.Keywords.keywordDensity(h,o.Keywords.getKeyword())}})}r.titleLength&&(_(n.bgseo_meta.title).extend({length:r.titleLength,lengthScore:o.Title.titleScore(r.titleLength)}),_(n.bgseo_meta.titleKeywordUsage).extend({lengthScore:o.Keywords.titleScore(o.Title.keywords())}),_(n.bgseo_keywords.keywordTitle).extend({lengthScore:o.Keywords.titleScore(o.Title.keywords())}),o.Editor.triggerAnalysis()),r.descLength&&(_(n.bgseo_meta.description).extend({length:r.descLength,lengthScore:o.Description.descriptionScore(r.descLength)}),_(n.bgseo_meta.descKeywordUsage).extend({lengthScore:o.Keywords.descriptionScore(o.Description.keywords())}),_(n.bgseo_keywords.keywordDescription).extend({lengthScore:o.Keywords.descriptionScore(o.Description.keywords())}),o.Editor.triggerAnalysis()),r.robotIndex&&(_(n.bgseo_visibility.robotIndex).extend({lengthScore:r.robotIndex}),o.Editor.triggerAnalysis()),r.robotFollow&&(_(n.bgseo_visibility.robotFollow).extend({lengthScore:r.robotFollow}),o.Editor.triggerAnalysis())}o.Editor.element.trigger("bgseo-report",[n])})},get:function(e){var t={};return t=_.isUndefined(e)?n:_.pickDeep(n,e)}},t=o.Report}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.SEO=BOLDGRID.SEO||{},function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Robots={init:function(){e(document).ready(t.onReady)},onReady:function(){t.getSettings(),t._index(),t._follow()},getSettings:function(){t.settings={indexInput:e("input[name=butterbean_boldgrid_seo_setting_bgseo_robots_index]"),noIndex:e('input[name=butterbean_boldgrid_seo_setting_bgseo_robots_index][value="noindex"]'),followInput:e("input[name=butterbean_boldgrid_seo_setting_bgseo_robots_follow]"),noFollow:e('input[name=butterbean_boldgrid_seo_setting_bgseo_robots_follow][value="nofollow"]')}},_index:function(){t.settings.indexInput.on("change",function(){e(this).trigger("bgseo-analysis",[{robotIndex:t.indexScore()}])})},indexScore:function(){var e;return e={status:"green",msg:_bgseoContentAnalysis.noIndex.good},t.settings.noIndex.is(":checked")&&(e={status:"red",msg:_bgseoContentAnalysis.noIndex.bad}),e},_follow:function(){t.settings.followInput.on("change",function(){e(this).trigger("bgseo-analysis",[{robotFollow:t.followScore()}])})},followScore:function(){var e={status:"green",msg:_bgseoContentAnalysis.noFollow.good};return t.settings.noFollow.is(":checked")&&(e={status:"yellow",msg:_bgseoContentAnalysis.noFollow.bad}),e}},t=o.Robots}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Sections={status:function(e){var t="green";return e.red>0?t="red":e.yellow>0&&(t="yellow"),t},score:function(e){var n,o,s;return n={red:0,green:0,yellow:0},o=_(e).countBy(function(t){return _.isUndefined(t.lengthScore)||"sectionScore"===_.property("sectionScore")(e)?"":t.lengthScore.status}),_(o).each(function(e,t){_.has(n,t)&&(n[t]=e)}),s={sectionScore:n,sectionStatus:t.status(n)}},removeStatus:function(e){e.removeClass("red yellow green")},navHighlight:function(n){_.each(butterbean.models.sections,function(o){var s,r=o.get("manager"),i=o.get("name");s=e('[href="#butterbean-'+r+"-section-"+i+'"]').closest("li"),t.removeStatus(s),s.addClass(n[i].sectionStatus)})},overviewStatus:function(n){var o=e("#butterbean-ui-boldgrid_seo.postbox > h2 > span:contains('Easy SEO')");t.removeStatus(o),o.addClass("overview-status "+n.bgseo_keywords.overview.status)}},t=o.Sections}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Title={init:function(){e(document).ready(t.onReady)},onReady:function(){t.getSettings(),t._title()},getSettings:function(){t.settings={title:e("#boldgrid-seo-field-meta_title")}},getTitle:function(){return t.settings.title},_title:function(){t.settings.title.on("input propertychange paste",_.debounce(function(){t.settings.title.trigger("bgseo-analysis",[{titleLength:t.settings.title.val().length}])},1e3))},titleScore:function(e){var t,n={};return t=_bgseoContentAnalysis.seoTitle.length,0===e&&(n={status:"red",msg:t.badEmpty}),e.isBetween(0,t.okScore+1)&&(n={status:"yellow",msg:t.ok}),e.isBetween(t.okScore-1,t.goodScore+1)&&(n={status:"green",msg:t.good}),e>t.goodScore&&(n={status:"red",msg:t.badLong}),n},keywords:function(e,n){return 0===arguments.length?(n=o.Keywords.getKeyword(),e=t.getTitle().val()):1===arguments.length&&(n=o.Keywords.getKeyword()),e=e.toLowerCase(),e.occurences(n)}},t=o.Title}(jQuery),function(e){"use strict";var t,n,o;o=BOLDGRID.SEO,n=o.report,o.Tooltips={init:function(){e(document).ready(t.onReady)},onReady:function(){t.getSettings(),t.hideTooltips(),t._enableTooltips(),t._toggleTooltip()},getSettings:function(){t.settings={description:e(".butterbean-control .butterbean-description"),tooltip:e("<span />",{"class":"bgseo-tooltip dashicons dashicons-editor-help","aria-expanded":"false"}),onClick:e(".butterbean-label, .bgseo-tooltip")}},_toggleTooltip:function(){t.settings.onClick.on("click",function(e){t.toggleTooltip(e)})},_enableTooltips:function(){t.settings.description.prev().append(t.settings.tooltip)},toggleTooltip:function(t){e(t.currentTarget).next(".butterbean-description").slideToggle()},hideTooltips:function(){t.settings.description.hide()}},t=o.Tooltips}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.SEO=BOLDGRID.SEO||{},function(e){"use strict";var t;t=BOLDGRID.SEO,t.Init={load:function(){_.each(t,function(e){return e.init&&e.init()})}}}(jQuery),BOLDGRID.SEO.Init.load();